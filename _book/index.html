<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Prof.&nbsp;Jean-Philippe Boucher, Ph.D.">
<meta name="author" content="Prof.&nbsp;Mathieu Pigeon, Ph.D.">
<meta name="dcterms.date" content="2024-04-11">

<title>Telematics and Algorithmic Bias</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Theory.html" rel="next">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="custom.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./index.html">Preface</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./images/Cars.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Telematics and Algorithmic Bias</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Theoretical concepts</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Claim Frequency</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DataSummary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Summary</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./VarTraditionelles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Traditional Covariates</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./VarTelematiques.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Telematic Covariates</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Claim Severity</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./severity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Summary</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./severityVarTrad.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Traditional Covariates</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./severityVarTelematique.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Telematic Covariates</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Discussion</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Discussion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Appendix</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Proposal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Initial Proposal</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#preface" id="toc-preface" class="nav-link active" data-scroll-target="#preface">Preface</a>
  <ul class="collapse">
  <li><a href="#data-used-for-the-project" id="toc-data-used-for-the-project" class="nav-link" data-scroll-target="#data-used-for-the-project">Data used for the project</a></li>
  <li><a href="#other" id="toc-other" class="nav-link" data-scroll-target="#other">Other</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Telematics and Algorithmic Bias</h1>
<p class="subtitle lead">Balancing Risk Assessment and Discrimination Mitigation in Insurance Pricing</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Prof.&nbsp;Jean-Philippe Boucher, Ph.D. </p>
             <p>Prof.&nbsp;Mathieu Pigeon, Ph.D. </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 11, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="preface" class="level1 unnumbered">
<h1 class="unnumbered">Preface</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Introduction</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Existing Telematics Models</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Objectives</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Summary of Results</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>The insurance industry often bases its decisions on statistical models, which, in a nutshell, must determine whether an insured person is risky or not. Therefore, carefully discriminating between risks is a question to establish the fairest possible premium. However, this practice may contravene principles prohibiting discrimination for sensitive variables such as age, gender, marital status, and ethnicity. Thus, the line between a <em>fair</em> actuarial classification and an <em>unfair</em> discrimination is thin and must be studied carefully.</p>
<p>To illustrate the delicate nature of some variables, we can, for example, refer to the practice of redlining in the United States to show the racial bias in such segmentation. Redlining consisted more precisely of delimiting residential neighborhoods according to their level of desirability by assigning them a color (green, blue, yellow, or red). The Federal Housing Administration (FHA) used this approach to determine eligibility to obtain insurance on a residence’s mortgage <span class="citation" data-cites="chibanda2022defining">(<a href="references.html#ref-chibanda2022defining" role="doc-biblioref">Chibanda 2022</a>)</span>. This approach was subsequently criticized for discriminating against ethnicity since the neighborhoods identified as the least desirable were mainly those where minorities resided. Redlining became illegal under the Fair Housing Act in 1968.</p>
<p>The use of the gender variable in pricing is also problematic in terms of fairness. In 1985, Montana was the first state in the United States to ban its use in the insurance industry following the efforts of feminist groups in the fight for unisex pricing <span class="citation" data-cites="reid">(<a href="references.html#ref-reid" role="doc-biblioref">Reid 1985</a>)</span>. All insurance coverage now has a segmentation that omits the use of gender. Several states, such as California, Hawaii, Massachusetts, and Michigan, have followed this initiative by excluding this variable in calculating automobile insurance premiums. The European Union also banned the use of gender in the estimation of premiums in 2012, and the calculation is now done through variables directly linked to the insured’s driving, such as the brand of the car and the mileage traveled <span class="citation" data-cites="litch">(<a href="references.html#ref-litch" role="doc-biblioref">Lichtenstein 2022</a>)</span>. Because of these changes, several players in the insurance industry, i.e., companies, regulators, and the scientific community, are developing new methodologies, making it possible to include the notion of fairness in models without sacrificing the quality of the latter (see, for example, <span class="citation" data-cites="lindholm2022discrimination">(<a href="references.html#ref-lindholm2022discrimination" role="doc-biblioref">Lindholm et al. 2022</a>)</span> and <span class="citation" data-cites="embrechts2022recent">(<a href="references.html#ref-embrechts2022recent" role="doc-biblioref">Embrechts and Wuthrich 2022</a>)</span>).</p>
<section id="telecommunications-and-informatics-technology" class="level3">
<h3 class="anchored" data-anchor-id="telecommunications-and-informatics-technology">TELEcommunications and inforMATICS technology</h3>
<p>Telematics technology is a blend of telecommunications and informatics that allows access to new sources of information through digitization and big data. This data is collected via an onboard diagnostics (OBD) device or a smartphone application. In the past, auto insurers primarily relied on static attributes related to the vehicle or the insured, which were indirectly related to accident risk. However, with the emergence of telematics technology, insurers can offer more customized premiums based on the insured’s driving habits, style, and volume, which can accurately determine their risk.</p>
<p>Usage-based insurance (UBI), in which the insured’s premium is estimated using their driving data, has become highly popular in the last decade. Traditionally, automobile insurers have relied mainly upon static attributes related to the vehicle or the insured, which are indirectly related to accident risk. With the rise of telematics technology, it is now feasible for insurers to offer a more customized premium that is more in line with an insured’s risk, which may now be determined by considering the insured’s volume, habits, and style of driving. One piece of GPS-collected information that is directly related to the risk insured is distance driven. The relevance of including this variable in ratemaking has been studied by <span class="citation" data-cites="ayuso2014time">(<a href="references.html#ref-ayuso2014time" role="doc-biblioref">Ayuso, Guillen, and Perez-Marin 2014</a>)</span>, <span class="citation" data-cites="ayuso2016using">(<a href="references.html#ref-ayuso2016using" role="doc-biblioref">Ayuso, Guillen, and Marin 2016</a>)</span>, <span class="citation" data-cites="boucher2013pay">(<a href="references.html#ref-boucher2013pay" role="doc-biblioref">Boucher, Perez-Marin, and Santolino 2013</a>)</span>, and <span class="citation" data-cites="LEM16">(<a href="references.html#ref-LEM16" role="doc-biblioref">Lemaire, Park, and Wang 2016</a>)</span>, among others.</p>
<p>Usage-based insurance has become highly popular in the last decade, allowing insurers to estimate the insured’s premium using their driving data. This is done through a pay-as-you-drive (PAYD) or pay-how-you-drive (PHYD) scheme <span class="citation" data-cites="TSE16">(<a href="references.html#ref-TSE16" role="doc-biblioref">Tselentis, Yannis, and Vlahogianni 2016</a>)</span>. PAYD focuses on driving habits, such as distance, time of day, or road type, while PHYD considers driving style, such as aggressive acceleration, sudden lane shifts, or speeding.</p>
<p>Insurers are increasingly promoting UBI due to its numerous benefits, such as allowing for more accurate pricing and a better customer experience. Consumers are also increasingly appreciating it. According to a survey conducted by Willis Towers Watson on <span class="math inline">\(1,005\)</span> insurance consumers in the United States, <span class="math inline">\(80~\%\)</span> of drivers are willing to share their recent driving information for a personalized insurance product. By accurately assessing an individual’s driving habits, insurers can more accurately determine their risk and offer a fair premium (e.g., <span class="citation" data-cites="LEM16">(<a href="references.html#ref-LEM16" role="doc-biblioref">Lemaire, Park, and Wang 2016</a>)</span> or <span class="citation" data-cites="VER17">(<a href="references.html#ref-VER17" role="doc-biblioref">Verbelen, Antonio, and Claeskens 2018</a>)</span>). Additionally, telematics technology positively impacts society by encouraging individuals to drive less and more safely, which helps reduce traffic congestion, make roads safer, limit greenhouse gas emissions, and make insurance more affordable, among other things.</p>
<p>UBI, or telematics data pricing, is likely the future standard in automobile insurance, and the market share of UBI products is growing. As more insurers adopt this technology, more consumers will benefit from lower premiums and safer roads.</p>
</section>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>Over the past fifteen years, a wealth of research has been conducted and published in scientific journals, spanning actuarial science, statistics, and transport. This extensive body of work has allowed us to categorize these contributions based on their success in achieving one or both of the following objectives:</p>
<ul>
<li>demonstrate that a model performs better when one or more elements from telematics are considered. These elements can range from the distance traveled (measured by an OBD or a smartphone application) to a detailed analysis of the position second by second.<br>
</li>
<li>demonstrate that using one or more elements from telematics can replace a sensitive variable such as gender or age.</li>
</ul>
<p>The models studied range from classic statistical approaches, such as generalized linear models (GLM), generalized additive models (GAM), and splines, to machine learning approaches, such as neural networks and boosting models.</p>
<p>In recent years, the distance traveled by a motorist has been the most studied measurement provided by a telematics device.</p>
<table class="table-striped table-hover table">
<caption>Overview of the scientific literature on telematics models</caption>
<colgroup>
<col style="width: 27%">
<col style="width: 33%">
<col style="width: 38%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Paper</th>
<th style="text-align: left;">Tools</th>
<th style="text-align: left;">Main Conclusion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span class="citation" data-cites="boucher2013pay">(<a href="references.html#ref-boucher2013pay" role="doc-biblioref">Boucher, Perez-Marin, and Santolino 2013</a>)</span></td>
<td style="text-align: left;">Generalization of the offset Poisson regression model</td>
<td style="text-align: left;">The association between the number of kilometers and claim frequency is not properly captured by a linear relationship.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="citation" data-cites="PAE13">(<a href="references.html#ref-PAE13" role="doc-biblioref">Paefgen, Staake, and Thiesse 2013</a>)</span></td>
<td style="text-align: left;">Classification algorithm</td>
<td style="text-align: left;">A novel way to aggregate telematics information into what they called an <em>aggregate risk factor</em>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="citation" data-cites="PAE14">(<a href="references.html#ref-PAE14" role="doc-biblioref">Paefgen, Staake, and Fleisch 2014</a>)</span></td>
<td style="text-align: left;">Multivariate logistic regression models</td>
<td style="text-align: left;">Non-linear relationship between mileage and accident risk.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="citation" data-cites="LEM16">(<a href="references.html#ref-LEM16" role="doc-biblioref">Lemaire, Park, and Wang 2016</a>)</span></td>
<td style="text-align: left;">Probit and ordered probit regression models</td>
<td style="text-align: left;">Annual mileage is an extremely powerful predictor of the number of claims at-fault.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="citation" data-cites="AYU16a">(<a href="references.html#ref-AYU16a" role="doc-biblioref">Ayuso, Guillen, and Perez-Marin 2016</a>)</span></td>
<td style="text-align: left;">Survival models</td>
<td style="text-align: left;">No gender discrimination is necessary if telematics provides enough information on driving habits.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="citation" data-cites="BOU17">(<a href="references.html#ref-BOU17" role="doc-biblioref">Boucher, Côte, and Guillen 2017</a>)</span></td>
<td style="text-align: left;">GAM for cross-sectional data</td>
<td style="text-align: left;">Neither distance nor duration is proportional to claim frequency but that frequency tends rather to stabilize once a certain distance or duration has been reached.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="citation" data-cites="VER17">(<a href="references.html#ref-VER17" role="doc-biblioref">Verbelen, Antonio, and Claeskens 2018</a>)</span></td>
<td style="text-align: left;">GAM and compositional predictors</td>
<td style="text-align: left;">Telematics variables increase the predictive power and render the use of gender as a discriminating rating variable redundant.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="citation" data-cites="WUT17">(<a href="references.html#ref-WUT17" role="doc-biblioref">Wuthrich 2017</a>)</span></td>
<td style="text-align: left;">Tech. from pattern recognition and machine learning</td>
<td style="text-align: left;">Driving styles can be categorized and used for a regression analysis in car insurance pricing.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="citation" data-cites="HUA19">(<a href="references.html#ref-HUA19" role="doc-biblioref">Huang and Meng 2019</a>)</span></td>
<td style="text-align: left;">Classification algorithm</td>
<td style="text-align: left;">Propose a way to bin continuous telematics variables to create a finite number of risk classes and increase interpretability.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="citation" data-cites="GUI19">(<a href="references.html#ref-GUI19" role="doc-biblioref">Guillen et al. 2019</a>)</span></td>
<td style="text-align: left;">Zero-inflated Poisson model</td>
<td style="text-align: left;">Existence of a learning effect for large values of distance traveled; speed limit violations and driving in urban areas increase the expected number of accident claims.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="citation" data-cites="AYU19">(<a href="references.html#ref-AYU19" role="doc-biblioref">Ayuso, Guillen, and Nielsen 2019</a>)</span></td>
<td style="text-align: left;">Count data regression models</td>
<td style="text-align: left;">Not only the distance traveled by the driver, but also driver habits, significantly influence the expected number of accidents and, hence, the cost of insurance coverage.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="citation" data-cites="GAO19">(<a href="references.html#ref-GAO19" role="doc-biblioref">Gao and Wuthrich 2019</a>)</span></td>
<td style="text-align: left;">Convolutional neural network</td>
<td style="text-align: left;">Appropriately allocate individual car driving trips to selected drivers.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="citation" data-cites="GAO19a">(<a href="references.html#ref-GAO19a" role="doc-biblioref">Gao, Meng, and Wuthrich 2019</a>)</span></td>
<td style="text-align: left;">K-means classification, PCA, neural network</td>
<td style="text-align: left;">Recommend the use of speed-acceleration heatmaps for car insurance pricing.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="citation" data-cites="boucher2020longitudinal">(<a href="references.html#ref-boucher2020longitudinal" role="doc-biblioref">Boucher and Turcotte 2020</a>)</span></td>
<td style="text-align: left;">GAM for Location, Scale and Shape</td>
<td style="text-align: left;">The relationship between frequency and distance driven is approximately linear and that the apparent nonlinearity is due to residual heterogeneity incorrectly captured by GAMs</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="citation" data-cites="SO21">(<a href="references.html#ref-SO21" role="doc-biblioref">So, Boucher, and Valdez 2021</a>)</span></td>
<td style="text-align: left;">Multi-class adaptive boosting algorithm</td>
<td style="text-align: left;">The proposed algorithm outperforms other learning models designed to handle class imbalances.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="citation" data-cites="GUI21">(<a href="references.html#ref-GUI21" role="doc-biblioref">Guillen, Nielsen, and Perez-Marin 2021</a>)</span></td>
<td style="text-align: left;">Poisson regression models</td>
<td style="text-align: left;">Hard-braking and acceleration events as well as smartphone use while driving increase the cost of insurance.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="citation" data-cites="duval1">(<a href="references.html#ref-duval1" role="doc-biblioref">Duval, Boucher, and Pigeon 2022</a>)</span></td>
<td style="text-align: left;">Logistic regression with lasso penalty</td>
<td style="text-align: left;">Telematics data become redundant after about <span class="math inline">\(3\)</span> months or <span class="math inline">\(4,000\)</span> km of observation from a claim classification perspective.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="citation" data-cites="GAO22">(<a href="references.html#ref-GAO22" role="doc-biblioref">Gao, Wang, and Wuthrich 2022</a>)</span></td>
<td style="text-align: left;">Boosting Poisson regression models</td>
<td style="text-align: left;">Both classical actuarial risk factors and telematics car driving data are necessary to receive the best predictive models.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="citation" data-cites="DUV23">(<a href="references.html#ref-DUV23" role="doc-biblioref">Duval, Boucher, and Pigeon 2023</a>)</span></td>
<td style="text-align: left;">Anomaly detection algorithm</td>
<td style="text-align: left;">A routine and a peculiarity anomaly score for each trip can improve classification.</td>
</tr>
</tbody>
</table>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>The proposed research project will analyze the importance of various protected covariates such as:</p>
<ul>
<li>the territory residence of the insured,<br>
</li>
<li>the age of the insured,<br>
</li>
<li>the sex of the insured,<br>
</li>
<li>the marital status of the insured,<br>
</li>
<li>the credit score of the insured.</li>
</ul>
<p>The project’s objective is to see how a driver’s telematic information can reduce the importance given to sensitive covariates such as the insured’s age and gender.</p>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<p>The work presented in this report can be used to extract the main conclusions presented below. It should be noted that these conclusions were obtained from the synthetic database and validated on the real database.</p>
<ol type="1">
<li>Whether for ratemaking based on frequency or severity, the addition of telematics variables decreases the model’s prediction error and reduces the importance of protected variables.<br>
</li>
<li>The credit score is the protected variable that maintains the highest level of utility after the addition of telematics variables.<br>
</li>
<li>The distance traveled (the variable <em>Miles.per.day</em> in our analysis) is the telematics variable that seems to be the most important.<br>
</li>
<li>The two families of approaches, parametric (GLM-Net) and non-parametric (XGBoost), lead to similar conclusions about the usefulness of protected variables after the addition of telematics variables.</li>
</ol>
</div>
</div>
</div>
<section id="data-used-for-the-project" class="level2">
<h2 class="anchored" data-anchor-id="data-used-for-the-project">Data used for the project</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Synthetic dataset</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Non-representative sample</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>The data that could have been used in this project comes from a major Canadian insurer and is highly confidential. Instead, we use the synthetic database generated with the original data. Details can be found here:</p>
<blockquote class="blockquote">
<p>B. So, <strong>J.-P. Boucher</strong> &amp; E. Valdez (2021). Synthetic Dataset Generation of Driver Telematics. <em>Risks</em>, 9(4), 58.</p>
</blockquote>
<p>The database can be accessed <a href="https://emiliano-valdez.scholar.uconn.edu/data/">here</a>. The synthetic dataset generated has 100,000 policies, including observations about driver’s claims experience and associated classical risk variables and telematics-related variables. The paper shows that the following variables are available in the synthetic database.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/TableSoValdezBoucher.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>An analysis of the results obtained with synthetic data is compared to those obtained with the original data to ensure the accuracy of the conclusions. In this regard, it is noteworthy that, in order to achieve the closest match possible with the results obtained from the original data (used to generate the synthetic database), we determined that two covariates should not be utilized in the study: <em>Annual.miles.driven</em> and <em>Annual.pct.driven</em>. Finally, as the synthetic database does not allow the different coverages to be distinguished, it will not be possible to analyze them separately. However, the analysis and the code used could easily be reused to include this information if available.</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>In analyzing telematics data, we must be careful before jumping to general conclusions about the driving behavior of the whole portfolio. Indeed, policyholders who decided to place a telematics device on their car or to download an application on their phone that tracks all their car trips do not correspond to the general driver population. In our case, approximately <span class="math inline">\(10\%\)</span> to <span class="math inline">\(15\%\)</span> of the insurance company’s portfolio chose to use the telematics option for their car insurance. Typically, these insureds correspond to one of the two following profiles:</p>
<ol type="1">
<li><p>Technophile policyholders. They love new telematics technology and want detailed information about their driving habits. Summary driving data is indeed continuously available to policyholders via a website.</p></li>
<li><p>Young and/or bad drivers. To motivate policyholders to buy the telematics option, insurance companies often offer an initial discount, and the renewal discounts range from <span class="math inline">\(0\%\)</span> to <span class="math inline">\(25\%\)</span> depending on the driving experience. Because auto insurance in Ontario is expensive and often unaffordable for some drivers, all discounts are welcome for policyholders with high insurance premiums. As a result, an unusually high proportion of risky insureds use telematics devices or telematics apps.</p></li>
</ol>
</div>
</div>
</div>
</section>
<section id="other" class="level2">
<h2 class="anchored" data-anchor-id="other">Other</h2>
<ul>
<li>The content in this project was generated with the assistance of artificial intelligence.</li>
<li>Computer applications do not claim to be the most efficient or elegant. The goal is mainly to demonstrate how theory can be applied to actual data. If it is possible to optimize the code, one should not hesitate.<br>
</li>
<li>Finally, it is worth noting that the report was written in Quarto (for details, see: <a href="https://quarto.org/docs/books" class="uri">https://quarto.org/docs/books</a>), which means that all the codes used to create this report are available and directly replicable.</li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-ayuso2016using" class="csl-entry" role="listitem">
Ayuso, Mercedes, Montserrat Guillen, and Ana Maria Perez Marin. 2016. <span>“Using GPS Data to Analyse the Distance Travelled to the First Accident at Fault in Pay-as-You-Drive Insurance.”</span> <em>Transportation Research Part C: Emerging Technologies</em> 68: 160–67.
</div>
<div id="ref-AYU19" class="csl-entry" role="listitem">
Ayuso, Mercedes, Montserrat Guillen, and Jens Perch Nielsen. 2019. <span>“Improving Automobile Insurance Ratemaking Using Telematics: Incorporating Mileage and Driver Behaviour Data.”</span> <em>Transportation</em> 46 (3): 735–52.
</div>
<div id="ref-ayuso2014time" class="csl-entry" role="listitem">
Ayuso, Mercedes, Montserrat Guillen, and Ana Maria Perez-Marin. 2014. <span>“Time and Distance to First Accident and Driving Patterns of Young Drivers with Pay-as-You-Drive Insurance.”</span> <em>Accident Analysis &amp; Prevention</em> 73: 125–31.
</div>
<div id="ref-AYU16a" class="csl-entry" role="listitem">
———. 2016. <span>“Telematics and Gender Discrimination: Some Usage-Based Evidence on Whether Men’s Risk of Accidents Differs from Women’s.”</span> <em>Risks</em> 4 (2).
</div>
<div id="ref-BOU17" class="csl-entry" role="listitem">
Boucher, Jean-Philippe, Steven Côte, and Montserrat Guillen. 2017. <span>“Exposure as Duration and Distance in Telematics Motor Insurance Using Generalized Additive Models.”</span> <em>Risks</em> 5 (4).
</div>
<div id="ref-boucher2013pay" class="csl-entry" role="listitem">
Boucher, Jean-Philippe, Ana Maria Perez-Marin, and Miguel Santolino. 2013. <span>“Pay-as-You-Drive Insurance: The Effect of the Kilometers on the Risk of Accident.”</span> In <em>Anales Del Instituto de Actuarios Espanoles</em>, 19:135–54. 3. Instituto de Actuarios Espanoles Madrid.
</div>
<div id="ref-boucher2020longitudinal" class="csl-entry" role="listitem">
Boucher, Jean-Philippe, and Roxane Turcotte. 2020. <span>“A Longitudinal Analysis of the Impact of Distance Driven on the Probability of Car Accidents.”</span> <em>Risks</em> 8 (3): 91.
</div>
<div id="ref-chibanda2022defining" class="csl-entry" role="listitem">
Chibanda, Kudakwashe F. 2022. <span>“Defining Discrimination in Insurance.”</span> <em>Cas Research Paper: A Special Series On Race And Insurance Pricing</em>.
</div>
<div id="ref-duval1" class="csl-entry" role="listitem">
Duval, Francis, Jean-Philippe Boucher, and Mathieu Pigeon. 2022. <span>“How Much Telematics Information Do Insurers Need for Claim Classification?”</span> <em>North American Actuarial Journal</em> 26 (4): 570–90.
</div>
<div id="ref-DUV23" class="csl-entry" role="listitem">
———. 2023. <span>“Enhancing Claim Classification with Feature Extraction from Anomaly-Detection-Derived Routine and Peculiarity Profiles.”</span> <em>Journal of Risk and Insurance</em> 90 (2): 421–58.
</div>
<div id="ref-embrechts2022recent" class="csl-entry" role="listitem">
Embrechts, Paul, and Mario V Wuthrich. 2022. <span>“Recent Challenges in Actuarial Science.”</span> <em>Annual Review of Statistics and Its Application</em> 9: 119–40.
</div>
<div id="ref-GAO19a" class="csl-entry" role="listitem">
Gao, Guangyuan, Shengwang Meng, and Mario V Wuthrich. 2019. <span>“Claims Frequency Modeling Using Telematics Car Driving Data.”</span> <em>Scandinavian Actuarial Journal</em> 2019 (2): 143–62.
</div>
<div id="ref-GAO22" class="csl-entry" role="listitem">
Gao, Guangyuan, He Wang, and Mario V Wuthrich. 2022. <span>“Boosting Poisson Regression Models with Telematics Car Driving Data.”</span> <em>Machine Learning</em> 111 (2): 243–72.
</div>
<div id="ref-GAO19" class="csl-entry" role="listitem">
Gao, Guangyuan, and Mario V Wuthrich. 2019. <span>“Convolutional Neural Network Classification of Telematics Car Driving Data.”</span> <em>Risks</em> 7 (1).
</div>
<div id="ref-GUI19" class="csl-entry" role="listitem">
Guillen, Montserrat, Jens Perch Nielsen, Mercedes Ayuso, and Ana M Perez-Marin. 2019. <span>“The Use of Telematics Devices to Improve Automobile Insurance Rates.”</span> <em>Risk Analysis</em> 39 (3): 662–72.
</div>
<div id="ref-GUI21" class="csl-entry" role="listitem">
Guillen, Montserrat, Jens Perch Nielsen, and Ana M Perez-Marin. 2021. <span>“Near-Miss Telematics in Motor Insurance.”</span> <em>Journal of Risk and Insurance</em> 88 (3): 569–89.
</div>
<div id="ref-HUA19" class="csl-entry" role="listitem">
Huang, Yifan, and Shengwang Meng. 2019. <span>“Automobile Insurance Classification Ratemaking Based on Telematics Driving Data.”</span> <em>Decision Support Systems</em> 127: 113–56.
</div>
<div id="ref-LEM16" class="csl-entry" role="listitem">
Lemaire, Jean, Sojung Carol Park, and Kili C. Wang. 2016. <span>“The Use of Annual Mileage as a Rating Variable.”</span> <em>ASTIN Bulletin</em> 46 (1): 39–69.
</div>
<div id="ref-litch" class="csl-entry" role="listitem">
Lichtenstein, Ellen. 2022. <span>“Which States Ban Gender-Rating in Insurance Premiums?”</span> <em>AgentSync</em>.
</div>
<div id="ref-lindholm2022discrimination" class="csl-entry" role="listitem">
Lindholm, Mathias, Ronald Richman, Andreas Tsanakas, and Mario V Wuthrich. 2022. <span>“Discrimination-Free Insurance Pricing.”</span> <em>ASTIN Bulletin: The Journal of the IAA</em> 52 (1): 55–89.
</div>
<div id="ref-PAE14" class="csl-entry" role="listitem">
Paefgen, Johannes, Thorsten Staake, and Elgar Fleisch. 2014. <span>“Multivariate Exposure Modeling of Accident Risk: Insights from Pay-as-You-Drive Insurance Data.”</span> <em>Transportation Research Part A: Policy and Practice</em> 61: 27–40.
</div>
<div id="ref-PAE13" class="csl-entry" role="listitem">
Paefgen, Johannes, Thorsten Staake, and Frederic Thiesse. 2013. <span>“Evaluation and Aggregation of Pay-as-You-Drive Insurance Rate Factors: A Classification Analysis Approach.”</span> <em>Decision Support Systems</em> 56: 192–201.
</div>
<div id="ref-reid" class="csl-entry" role="listitem">
Reid, T. R. 1985. <span>“Montana Implements Policy of ‘Unisex‘ Insurance.”</span> <em>Washington Post</em>.
</div>
<div id="ref-SO21" class="csl-entry" role="listitem">
So, Banghee, Jean-Philippe Boucher, and Emiliano A Valdez. 2021. <span>“Cost-Sensitive Multi-Class Adaboost for Understanding Driving Behavior Based on Telematics.”</span> <em>ASTIN Bulletin: The Journal of the IAA</em> 51 (3): 719–51.
</div>
<div id="ref-TSE16" class="csl-entry" role="listitem">
Tselentis, Dimitrios I, George Yannis, and Eleni I Vlahogianni. 2016. <span>“Innovative Insurance Schemes: Pay as/How You Drive.”</span> <em>Transportation Research Procedia</em> 14: 362–71.
</div>
<div id="ref-VER17" class="csl-entry" role="listitem">
Verbelen, Roel, Katrien Antonio, and Gerda Claeskens. 2018. <span>“Unravelling the Predictive Power of Telematics Data in Car Insurance Pricing.”</span> <em>Journal of the Royal Statistical Society Series C: Applied Statistics</em> 67 (5): 1275–1304.
</div>
<div id="ref-WUT17" class="csl-entry" role="listitem">
Wuthrich, Mario V. 2017. <span>“Covariate Selection from Telematics Car Driving Data.”</span> <em>European Actuarial Journal</em> 7: 89–108.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Theory.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Theoretical concepts</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>